const catcher = document.querySelector('.catcher');

// Move the catcher left or right
document.addEventListener('keydown', (event) => {
    const key = event.key;
    const currentPosition = parseFloat(getComputedStyle(catcher).left);
    const step = 10;

    if (key === 'ArrowLeft' && currentPosition > 0) {
        catcher.style.left = `${currentPosition - step}px`;
    } else if (key === 'ArrowRight' && currentPosition < 350) {
        catcher.style.left = `${currentPosition + step}px`;
    }
});

// Create and animate falling phishing emails
function createPhishingEmail() {
    const phishingEmail = document.createElement('div');
    phishingEmail.classList.add('phishing-email');
    document.querySelector('.game-container').appendChild(phishingEmail);

    const startPosX = Math.random() * 350;
    phishingEmail.style.left = startPosX + 'px';

    const animationDuration = Math.random() * 3000 + 2000;
    phishingEmail.style.animationDuration = animationDuration + 'ms';

    phishingEmail.addEventListener('animationend', () => {
        phishingEmail.remove();
    });
}

setInterval(createPhishingEmail, 2000);

// Check for catching phishing emails
setInterval(() => {
    const catcherPos = catcher.getBoundingClientRect();
    const phishingEmails = document.querySelectorAll('.phishing-email');

    phishingEmails.forEach((email) => {
        const emailPos = email.getBoundingClientRect();

        if (
            emailPos.bottom >= catcherPos.top &&
            emailPos.left <= catcherPos.right &&
            emailPos.right >= catcherPos.left
        ) {
            email.remove();
        }
    });
}, 100);
